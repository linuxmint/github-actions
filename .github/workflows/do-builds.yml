name: Build

# called from a workflow in each repository
on:
  workflow_call:
    inputs:
      commit_id:
        description: "The commit sha or branch to build from"
        required: true
        default: "master"
        type: string
      dependencies:
        description: 'A comma separated list of owner/repo dependencies to pull the latest build for (such as "linuxmint/xapp, linuxmint/cinnamon-desktop, linuxmint/cinnamon-menus")'
        required: false
        type: string
      codespell_ignore_files_list:
        description: 'A comma separated list of files to skip with codespell.'
        required: false
        type: string
      codespell_ignore_words_list:
        description: 'A comma separated list of words to ignore with codespell.'
        required: false
        type: string

jobs:
  mint22:
    uses: linuxmint/github-actions/.github/workflows/build-on-image.yml@master
    with:
      display_name: Mint 22
      mint_version: mint22
      image: linuxmintd/mint22-amd64
      commit_id: ${{ inputs.commit_id }}
      dependencies: ${{ inputs.dependencies }}
      # Always have these on the most recent image.
      codespell: true
      codespell_ignore_files_list: ChangeLog,*.po,*.svg,LINGUAS,${{ inputs.codespell_ignore_files_list }}
      codespell_ignore_words_list: gir,${{ inputs.codespell_ignore_words_list }}
  lmde6:
    uses: linuxmint/github-actions/.github/workflows/build-on-image.yml@master
    with:
      display_name: LMDE 6
      mint_version: lmde6
      image: linuxmintd/lmde6-amd64
      commit_id: ${{ inputs.commit_id }}
      dependencies: ${{ inputs.dependencies }}
  mint21:
    uses: linuxmint/github-actions/.github/workflows/build-on-image.yml@master
    with:
      display_name: Mint 21
      mint_version: mint21
      image: linuxmintd/mint21.2-amd64
      commit_id: ${{ inputs.commit_id }}
      dependencies: ${{ inputs.dependencies }}






