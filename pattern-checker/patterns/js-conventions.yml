patterns:
    - name: lang_bind
      regex: '\bLang\.bind\s*\('
      message: |
          `Lang.bind()` is deprecated. Use arrow functions (`() => {}`) or `Function.prototype.bind()` instead.
      severity: warning
      extensions:
          - .js

    - name: shell_string_spawn
      regex: '\b(spawnCommandLine|spawnCommandLineAsync|spawnCommandLineAsyncIO|spawn_command_line_async|spawn_command_line_sync)\s*\('
      message: |
          Prefer argument vector spawn functions over shell command strings.
          This is especially important when arguments include untrusted input (user data,
          filenames, settings values, etc.) as shell strings are vulnerable to injection.
          Static command strings are generally fine, but argv is always safer.
          Use `Util.spawn(["cmd", "arg1", "arg2"])` or `Util.trySpawn()` instead.
      severity: info
      extensions:
          - .js
          - .py
          - .c
          - .h
          - .vala

    - name: global_screen
      regex: '\bglobal\.screen\b'
      message: |
          `global.screen` is a deprecated compatibility shim for the removed `MetaScreen`.
          Use the appropriate replacement instead:
          - Workspace operations: `global.workspace_manager` (`get_n_workspaces()`,
            `get_workspace_by_index()`, `append_new_workspace()`, `remove_workspace()`,
            `override_workspace_layout()`, `toggle_desktop()`, `show_desktop()`,
            `get_active_workspace()`, `get_active_workspace_index()`, `get_workspaces()`)
          - Monitor info: `Main.layoutManager` (`monitors`, `primaryMonitor`, `primaryIndex`,
            `focusMonitor`, `currentMonitor` — each with geometry, index, name, and
            `inFullscreen` properties)
          - Monitor by rect: `global.display.get_monitor_index_for_rect()`
          - Display size: `global.display.get_size()`
          - Mouse window: `Main.layoutManager.getWindowAtPointer()`
          - Window xid: `metaWindow.get_xwindow()`
          - Display: `global.display`
      severity: warning
      extensions:
          - .js

    - name: require_usage
      regex: '\brequire\s*\('
      message: |
          `require()` is deprecated. Use the native CJS importer instead:
          - For local xlet modules: `const Extension = imports.ui.extension;`
            `const Me = Extension.getCurrentExtension();` then `Me.imports.myModule`
          - For GI bindings: `const St = imports.gi.St;`
          - For Cinnamon modules: `const Main = imports.ui.main;`
      severity: warning
      extensions:
          - .js

    - name: module_exports
      regex: '\bmodule\.exports\b'
      message: |
          `module.exports` is deprecated. Use `var` to declare symbols you want
          to export — the native CJS importer automatically exports top-level
          `var` and `function` declarations. `let`, `const`, and `class`
          declarations are module-private.
      severity: warning
      extensions:
          - .js

    - name: file_utils_old_api
      regex: '\b(requireModule|getModuleByIndex|unloadModule)\s*\('
      message: |
          `requireModule()`, `getModuleByIndex()`, and `unloadModule()` have been
          removed from `fileUtils`. Use the native CJS importer instead:
          `const Extension = imports.ui.extension;`
          `const Me = Extension.getCurrentExtension();`
          then access local modules via `Me.imports.myModule`.
      severity: warning
      extensions:
          - .js

    - name: tweener_usage
      regex: '\b(Tweener\.addTween|Tweener\.removeTweens|Tweener\.pauseTweens|Tweener\.resumeTweens|imports\.ui\.tweener)\b'
      message: |
          The Tweener module is deprecated. Use Clutter actor easing instead.
          Actors have `ease()` and `ease_property()` methods (patched in `environment.js`).
          Example: `actor.ease({ opacity: 255, duration: 200, mode: Clutter.AnimationMode.EASE_OUT_QUAD });`
      severity: warning
      extensions:
          - .js
